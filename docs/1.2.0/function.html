---
layout: default
---
<h1>Function</h1><hr><ul id="methods"><li class="grid-6"><h2><span class="ret">function</span> <span class="name">Compose</span> <span class="params">(funcs*)</span></h2><p>Creates a new function based on the composite of all the functions given. The list of functions can either be given as an array as the first parameter or a continuous set of functions.</p><div class="example"><a class="toggle" >View Example</a>{% highlight js %} function A(a) { return a ^ 2 }
 function B(a) { return a / 2 }
 var C = Function.compose(A, B);
 C(5) // Same as A(B(5))
{% endhighlight %}</div><div class="code"><a class="toggle" >View Code</a>{% highlight js %}function (funcs) {
    
    if ( ! Array.isArray(funcs)) {
      funcs = Array.prototype.slice.call(arguments);
    }
    
    funcs = funcs.reverse();
    
    return function(arg) {
      return funcs.reduce(function(a,b) {
        return b(a);
      }, arg);
    }
    
}{% endhighlight %}</div></li></ul><div class="clear"></div><h1>Function.prototype</h1><hr><ul id="methods"><li class="grid-6"><h2><span class="ret">function</span> <span class="name">Cache</span> <span class="params">(time, ident)</span></h2><p>Caches the result of the function for specified period of time. The ident parameter allows you to specify your own hashing function for the parameters.</p><div class="example"><a class="toggle" >View Example</a>{% highlight js %} var fibonacci = function(n) {
   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
 };
 // fibonacci(50) will take a several minutes to complete
 var fibonacci = fibonacci.cache();
 // fibonacci(1000) will now take roughly 13ms to complete!
{% endhighlight %}</div><div class="code"><a class="toggle" >View Code</a>{% highlight js %}function (time, ident) {
    
    time = isNaN(time) ? -1 : time;
    ident = ident || function(id) {
      return (typeof id == 'object') ? id.__objectHash__ : id.toString();
    }
    
    var cache = {}, callback = this, timeouts = {};
    
    return function() {
      
      var args = Object.values(arguments), id = '(' + args.map(ident).join(',') + ')';
      
      if ( ! (id in cache)) cache[id] = callback.apply(callback, args);
      else if (id in timeouts) {
        clearTimeout(timeouts[id]);
        delete timeouts[id];
      }

      if (time > 0) {
        timeouts[id] = setTimeout(function() {
          delete cache[id];
        }, time);
      }
            
      return cache[id];
    }
     
}{% endhighlight %}</div></li><li class="grid-6"><h2><span class="ret">function</span> <span class="name">Delay</span> <span class="params">(time)</span></h2><p>Delays a function by a certain amount of time then calls the callback with the result of the function</p><div class="example"><a class="toggle" >View Example</a>{% highlight js %} Date.now.delay(function(now, then) {
   log(now - then); // > 50 (Or very near it!)
 }, 50, Date.now());
{% endhighlight %}</div><div class="code"><a class="toggle" >View Code</a>{% highlight js %}function (callback, time) {
    
    return setTimeout(function(args) {
      callback.apply(callback, [this()].concat(Array.prototype.slice.call(args, 2)));
    }.bind(this, arguments), time);
    
}{% endhighlight %}</div></li><li class="clear"></li></ul><div class="clear"></div>